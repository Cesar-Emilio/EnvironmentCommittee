<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Eventos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../utils/nav.js" type="module" defer></script>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-success">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <img src="../icons/ECO_VIDA_icon.png" alt="Logo" style="width: 2.5em; height: 2.5em;">
        Comité Ambiental
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="../index.html">Home</a>
          </li>
          <li class="nav-item me-auto">
            <a class="nav-link active" href="../common/profile.html"><i class="bi bi-person-fill"></i> Perfil</a>
          </li>
        </ul>
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link logout-btn" href="#"><i class="bi bi-box-arrow-right"></i> Cerrar sesión</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container my-5">
      <h1 class="text-center mb-4">Gestión de Eventos</h1>
      <button class="btn btn-success mb-4" onclick="addEvent()">Agregar Evento</button>
      <div id="eventContainer" class="list-group"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module">
    import { renderEvents } from '../utils/admins.js';

    const renderEventList = (events) => {
        const container = document.getElementById('eventContainer');
        container.innerHTML = events.map(event => `
          <div class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <h5>${event.title}</h5>
              <p>${event.date}, ${event.status}</p>
            </div>
            <div>
              <button class="btn btn-warning btn-sm me-2" onclick="editEvent(${event.id})">Editar</button>
              <button class="btn btn-danger btn-sm" onclick="deleteEvent(${event.id})">Eliminar</button>
            </div>
          </div>
        `).join('');
    };

    document.addEventListener('DOMContentLoaded', async () => {
        const events = await renderEvents();
        renderEventList(events);
    });

    const addEvent = () => {
        Swal.fire('Agregar evento', 'Función no implementada.', 'info');
    };

    const editEvent = (id) => {
        Swal.fire(`Editar evento con ID ${id}`, 'Función no implementada.', 'info');
    };

    const deleteEvent = (id) => {
        Swal.fire(`Eliminar evento con ID ${id}`, 'Función no implementada.', 'info');
    };
  </script>
</body>
</html>
